{% load static %}
{% load gamebook_filters %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Grafo de Navegação - {{ book.title }}</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/viz.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/2.1.2/full.render.js"></script>
    <link href="{% static 'css/dist/styles.css' %}" rel="stylesheet">
</head>
<body class="p-6 font-sans">

<h1 class="text-2xl font-bold mb-4">Grafo de Navegação: {{ book.title }}</h1>

<div id="graph" class="border p-4 my-4"></div>

<script>
    const dot = `{{ dot|escapejs }}`;

    const viz = new Viz();

    viz.renderSVGElement(dot)
        .then(function(element) {
            document.getElementById('graph').appendChild(element);
        })
        .catch(error => {
            document.getElementById('graph').innerText = "Erro ao renderizar o grafo: " + error;
            console.error(error);
        });
</script>

</body>
</html>
